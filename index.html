<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>데이터 현황 및 AI 예측</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 20px; background-color: #f8f9fa; color: #212529; }
        .container { max-width: 1000px; margin: 0 auto; background-color: #ffffff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
        h1 { color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-bottom: 25px; }
        h2 { color: #343a40; margin-top: 30px; margin-bottom: 15px; }
        .chart-container { margin-bottom: 40px; }
        /* 테이블 스타일 */
        table { width: 100%; max-width: 1000px; border-collapse: separate; border-spacing: 0; border: 1px solid #ddd; font-size: 14px; min-width: 300px; border-radius: 8px; overflow: hidden; margin-top: 20px; }
        thead th { padding: 14px; background-color: #f1f1f1; border-right: 1px solid #ccc; text-align: left; color: #333; }
        tbody td { padding: 12px; border-top: 1px solid #eee; border-right: 1px solid #eee; text-align: right; background-color: white; color: #343a40; }
        tbody tr:last-child td { border-bottom: none; }
        .plus { color: #dc3545; font-weight: 600; }
        .minus { color: #007bff; font-weight: 600; }
        .zero { color: #6c757d; font-weight: 600; }
        .first-col { text-align: left !important; color: #343a40; font-weight: normal; }
        .value-col { font-weight: bold; color: #333; }
        
        /* AI 예측 스타일 */
        .ai-box { white-space: pre-wrap; color: #007bff; font-weight: bold; padding: 15px; border: 1px dashed #007bff; border-radius: 6px; background-color: #f0f8ff; line-height: 1.6; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>자동 업데이트 데이터 차트 및 분석</h1>
        <p>최종 업데이트 시간: <span id="update-time"></span></p>

        <div class="chart-container">
            <h2>데이터 추이 차트</h2>
            <canvas id="myChart"></canvas>
        </div>

        <div style="margin-bottom: 20px;">
            <h2>AI 예측 결과</h2>
            <div class="ai-box">출시 5일차(11월 1일)를 맞이한 이 MMORPG는 전반적으로 매우 건강한 초기 성장 추세를 보이고 있습니다. 11월 1일 04시 23분경 누적 매출 $3,150,300에서 시작하여 21시 48분경 $3,626,900를 기록하며 하루 동안에도 상당한 매출 상승이 지속되고 있습니다. 이는 MMORPG 장르 특성상 출시 초기에 높은 매출을 기록하는 것이 일반적이나, 5일차에도 견조한 성장세를 유지하며 매출이 꾸준히 증가하고 있다는 점에서 사용자 유입 및 과금 활동이 활발하게 이루어지고 있음을 시사하며 매우 긍정적인 신호로 해석됩니다. 현재 데이터 추이를 바탕으로 오늘(11월 1일) 23시 59분 59초까지의 총 예상 누적 매출은 약 $3,687,000로 예측됩니다.<br><br>오늘(11월 1일) 하루 동안 발생한 매출액이 약 $536,570인 점을 고려하여, 이 일일 매출 추세가 11월 한 달간 유지된다고 가정할 경우, 11월 총 예상 매출은 약 $16,100,000에 이를 것으로 예측됩니다. 이 예측치는 현재까지의 성장세를 바탕으로 한 것이며, 향후 게임 내 업데이트, 이벤트, 마케팅 활동, 그리고 시장 변동성 등 다양한 요인에 따라 변동될 수 있습니다.</div>
        </div>
        
        <h2>일별 요약 데이터</h2>
        <table class="data-table"><thead>    <tr>        <th class="header-col">날짜</th>        <th class="header-col right-align">값</th>        <th class="header-col right-align">변화</th>    </tr></thead><tbody></tbody></table>

        <h2 style="margin-top: 40px;">시간별 상세 데이터</h2>
        <table class="data-table"><thead>    <tr>        <th class="header-col">시간</th>        <th class="header-col right-align">값</th>        <th class="header-col right-align">변화</th>    </tr></thead><tbody></tbody></table>
        
        <script>
            // 차트 데이터 삽입 (토큰 추가)
            const dataSet = JSON.parse('{    "raw_data_string": "2025-11-01 04:23:18 KST : 3,150,300
2025-11-01 05:32:33 KST : 3,179,000
2025-11-01 06:09:05 KST : 3,201,000
2025-11-01 07:43:10 KST : 3,216,000
2025-11-01 08:25:36 KST : 3,235,300
2025-11-01 10:02:47 KST : 3,280,000
2025-11-01 11:11:03 KST : 3,298,800
2025-11-01 14:30:00 KST : 3,388,600
2025-11-01 15:37:06 KST : 3,446,400
2025-11-01 16:56:10 KST : 3,475,700
2025-11-01 17:17:10 KST : 3,501,400
2025-11-01 18:27:55 KST : 3,545,100
2025-11-01 20:04:13 KST : 3,600,600
2025-11-01 20:10:32 KST : 3,600,600
2025-11-01 20:18:51 KST : 3,600,600
2025-11-01 20:22:54 KST : 3,600,600
2025-11-01 20:27:11 KST : 3,600,600
2025-11-01 20:31:29 KST : 3,600,600
2025-11-01 20:36:13 KST : 3,600,600
2025-11-01 20:45:21 KST : 3,600,600
2025-11-01 20:54:42 KST : 3,600,600
2025-11-01 21:01:23 KST : 3,626,900
2025-11-01 21:03:56 KST : 3,626,900
2025-11-01 21:07:20 KST : 3,626,900
2025-11-01 21:11:26 KST : 3,626,900
2025-11-01 21:18:52 KST : 3,626,900
2025-11-01 21:26:05 KST : 3,626,900
2025-11-01 21:29:30 KST : 3,626,900
2025-11-01 21:37:44 KST : 3,626,900
2025-11-01 21:48:40 KST : 3,626,900",    "labels": [],    "values": []}');

            // 마지막 업데이트 시간 표시
            // 데이터셋 레이블에서 마지막 요소를 추출하여 업데이트 시간을 표시합니다.
            const lastDataPoint = dataSet.labels[dataSet.labels.length - 1];
            document.getElementById('update-time').textContent = lastDataPoint;

            // Chart.js 설정
            const ctx = document.getElementById('myChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: dataSet,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.y.toLocaleString() + ' 원';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString() + ' 원';
                                }
                            }
                        }
                    }
                }
            });
        </script>
    </div>
</body>
</html>
